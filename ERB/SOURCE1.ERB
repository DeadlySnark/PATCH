;-------------------------------------------------------------------------------
;ћыTARGETѕ╦ЉХљФSOURCE
;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_EXP(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	SIF SOURCE:ЊzЌЖ:Ѕшѓb
		EXP:ЊzЌЖ:ѓbїoї▒ ++
	IF SOURCE:ЊzЌЖ:Ѕшѓu && (!TALENT:ЊzЌЖ:ЈѕЈЌ || !TFLAG:2)
		EXP:ЊzЌЖ:ѓuїoї▒ ++
	ENDIF
	SIF SOURCE:ЊzЌЖ:Ѕшѓ`
		EXP:ЊzЌЖ:ѓ`їoї▒ ++
	SIF SOURCE:ЊzЌЖ:Ѕшѓa
		EXP:ЊzЌЖ:ѓaїoї▒ ++
	SIF CFLAG:ЊzЌЖ:ЃЇЂ[Ѓ^Ђ[Љ}ЊЧ && EXP_UP(1,ЊzЌЖ) > 0
		EXP:ЊzЌЖ:ѓuїoї▒ --
	SIF CFLAG:ЊzЌЖ:ЃЇЂ[Ѓ^Ђ[AЉ}ЊЧ && EXP_UP(2,ЊzЌЖ) > 0
		EXP:ЊzЌЖ:ѓ`їoї▒ --

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ѕшѓb(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓbЋqі┤ѓкѓbЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ѕшѓb = SOURCE:ЊzЌЖ:Ѕшѓb * (2 + TALENT:ЊzЌЖ:ѓbі┤Њx) / 2
	;Cі┤іo
	SOURCE:ЊzЌЖ:Ѕшѓb = SOURCE:ЊzЌЖ:Ѕшѓb * SOURCE_REVISION1(ABL:ЊzЌЖ:ѓbі┤іo) / 10
	LOCAL = SOURCE:ЊzЌЖ:Ѕшѓb
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	IF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.80
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 1.00
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.20
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.40
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.60
	ENDIF
	CUP:ЊzЌЖ:Ѕшѓb += LOCAL
	LOCAL = SOURCE:ЊzЌЖ:Ѕшѓb
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL = LOCAL * SOURCE_REVISION2(ABL:ЊzЌЖ:Ќ~ќ]) / 100
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ѕшѓu(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓuЋqі┤ѓкѓuЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ѕшѓu = SOURCE:ЊzЌЖ:Ѕшѓu * (2 + TALENT:ЊzЌЖ:ѓuі┤Њx) / 2
	;Vі┤іo
	SOURCE:ЊzЌЖ:Ѕшѓu = SOURCE:ЊzЌЖ:Ѕшѓu * SOURCE_REVISION1(ABL:ЊzЌЖ:ѓuі┤іo) / 10
	;EXP:ѓuїoї▒ѓ­ѓПѓж
	IF EXP:ЊzЌЖ:ѓuїoї▒ < EXPLV:1
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.30
	ELSEIF EXP:ЊzЌЖ:ѓuїoї▒ < EXPLV:2
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.50
	ELSEIF EXP:ЊzЌЖ:ѓuїoї▒ < EXPLV:3
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.80
	ELSEIF EXP:ЊzЌЖ:ѓuїoї▒ < EXPLV:4
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 1.00
	ELSEIF EXP:ЊzЌЖ:ѓuїoї▒ < EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 1.20
	ELSEIF EXP:ЊzЌЖ:ѓuїoї▒ >= EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 1.50
	ENDIF
	;PALAM:ЈЂііѓ­ѓПѓж
	IF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:1
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.10
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:2
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.40
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:3
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.60
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 0.80
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі >= PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ѕшѓu , 1.00
	ENDIF
	LOCAL = SOURCE:ЊzЌЖ:Ѕшѓu
	LOCAL:1 = SOURCE:ЊzЌЖ:Ѕшѓu
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	IF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.60
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 0.80
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.00
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.20
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.50
	ENDIF
	;њэѓУІ№ЇЄ
	IF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓuі╔ѓ│) == "ѓФѓсѓ┴ѓФѓсѓ┴"
		TIMES LOCAL, 0.85
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓuі╔ѓ│) == "ѓФѓсѓцѓФѓсѓц"
		TIMES LOCAL, 0.70
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓuі╔ѓ│) == "Normal"
		TIMES LOCAL, 0.63
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓuі╔ѓ│) == "ѓфѓ╬ѓфѓ╬"
		TIMES LOCAL, 0.55
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓuі╔ѓ│) == "ѓ█ѓ┴ѓЕѓУ"
		TIMES LOCAL, 0.40
	ENDIF
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL:1 = LOCAL:1 * SOURCE_REVISION2(ABL:ЊzЌЖ:Ќ~ќ]) / 100
	;ЈгљlЉ╠ї^
	IF TALENT:ЊzЌЖ:Љ╠ї^ < -2
		TIMES LOCAL , 0.80
		TIMES LOCAL:1 , 1.20
	ENDIF
	CUP:ЊzЌЖ:Ѕшѓu += LOCAL
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ѕшѓ`(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓ`Ћqі┤ѓкѓ`ЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ѕшѓ` = SOURCE:ЊzЌЖ:Ѕшѓ` * (2 + TALENT:ЊzЌЖ:ѓ`і┤Њx) / 2
	;Aі┤іo
	SOURCE:ЊzЌЖ:Ѕшѓ` = SOURCE:ЊzЌЖ:Ѕшѓ` * SOURCE_REVISION1(ABL:ЊzЌЖ:ѓ`і┤іo) / 10
	;EXP:ѓ`їoї▒ѓ­ѓПѓж
	IF EXP:ЊzЌЖ:ѓ`їoї▒ < EXPLV:1
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.30
	ELSEIF EXP:ЊzЌЖ:ѓ`їoї▒ < EXPLV:2
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.50
	ELSEIF EXP:ЊzЌЖ:ѓ`їoї▒ < EXPLV:3
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.80
	ELSEIF EXP:ЊzЌЖ:ѓ`їoї▒ < EXPLV:4
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 1.00
	ELSEIF EXP:ЊzЌЖ:ѓ`їoї▒ < EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 1.20
	ELSEIF EXP:ЊzЌЖ:ѓ`їoї▒ >= EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 1.50
	ENDIF
	;PALAM:ЈЂііѓ­ѓПѓж
	IF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:1
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.40
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:2
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.60
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:3
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.80
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі < PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 0.90
	ELSEIF PALAM:ЊzЌЖ:ЈЂіі >= PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ѕшѓ` , 1.00
	ENDIF
	LOCAL = SOURCE:ЊzЌЖ:Ѕшѓ`
	LOCAL:1 = SOURCE:ЊzЌЖ:Ѕшѓ`
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	;Ѕшѓ`ѓ═ѓаѓ▄ѓУPALAM:Ќ~ЈЬѓ┼ѓ═ЇиѓфЈoѓ╚ѓб
	IF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.90
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 1.00
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.10
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.20
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.30
	ENDIF
	;њэѓУІ№ЇЄ
	IF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓ`і╔ѓ│) == "ѓФѓсѓ┴ѓФѓсѓ┴"
		TIMES LOCAL, 0.85
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓ`і╔ѓ│) == "ѓФѓсѓцѓФѓсѓц"
		TIMES LOCAL, 0.70
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓ`і╔ѓ│) == "Normal"
		TIMES LOCAL, 0.63
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓ`і╔ѓ│) == "ѓфѓ╬ѓфѓ╬"
		TIMES LOCAL, 0.55
	ELSEIF њэѓУІ№ЇЄќ╝Ј╠(BASE:ЊzЌЖ:ѓ`і╔ѓ│) == "ѓ█ѓ┴ѓЕѓУ"
		TIMES LOCAL, 0.40
	ENDIF
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL:1 = LOCAL:1 * SOURCE_REVISION2(ABL:ЊzЌЖ:Ќ~ќ]) / 100
	;ЈгљlЉ╠ї^
	IF TALENT:ЊzЌЖ:Љ╠ї^ < -2
		TIMES LOCAL , 0.50
		TIMES LOCAL:1 , 1.50
	ENDIF
	;ЅшAѓ╠Ѓ\Ђ[ЃXѓф0ѕ╚Јсѓ┼ЈѕЈЌѓ┼њтЉђі¤ћOѓ╠ѓкѓФЂAІЧЋъѓ╠Ѓ\Ђ[ЃXѓ­јOЋфѓ╠ѕЖѓ╔ѓиѓж
	IF EXP:ЊzЌЖ:ѓuїoї▒ == 0 && TALENT:ЊzЌЖ:њтЉђ > 0 && SOURCE:ЊzЌЖ:Ѕшѓ` > 0
		SOURCE:ЊzЌЖ:ІЧЈ] /= 3
	ENDIF
	CUP:ЊzЌЖ:Ѕшѓ` += LOCAL
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ѕшѓa(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓaЋqі┤ѓкѓaЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ѕшѓa = SOURCE:ЊzЌЖ:Ѕшѓa * (2 + TALENT:ЊzЌЖ:ѓaі┤Њx) / 2
	;Bі┤іo
	SOURCE:ЊzЌЖ:Ѕшѓa = SOURCE:ЊzЌЖ:Ѕшѓa * SOURCE_REVISION1(ABL:ЊzЌЖ:ѓaі┤іo) / 10
	LOCAL = SOURCE:ЊzЌЖ:Ѕшѓa
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	IF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.80
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 1.00
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.20
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.40
	ELSEIF PALAM:ЊzЌЖ:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.60
	ENDIF
	CUP:ЊzЌЖ:Ѕшѓa += LOCAL
	LOCAL = SOURCE:ЊzЌЖ:Ѕшѓa
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL = LOCAL * SOURCE_REVISION2(ABL:ЊzЌЖ:Ќ~ќ]) / 100
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL

;-----------------------------------------------------
;Ќ^ЅшCVAB
;-----------------------------------------------------
@SOURCE_Ќ^Ѕшѓb(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓbЋqі┤ѓкѓbЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓb = SOURCE:ЊzЌЖ:Ќ^Ѕшѓb * (2 + TALENT:јтљl:ѓbі┤Њx) / 2
	;Cі┤іo
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓb = SOURCE:ЊzЌЖ:Ќ^Ѕшѓb * SOURCE_REVISION1(ABL:јтљl:ѓbі┤іo) / 10
	LOCAL = SOURCE:ЊzЌЖ:Ќ^Ѕшѓb
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	IF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.80
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 1.00
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.20
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.40
	ELSEIF PALAM:јтљl:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.60
	ENDIF
	CUP:јтљl:Ѕшѓb += LOCAL
	LOCAL = SOURCE:ЊzЌЖ:Ќ^Ѕшѓb
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL = LOCAL * SOURCE_REVISION2(ABL:јтљl:Ќ~ќ]) / 100
	CUP:јтљl:Ќ~ЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ќ^Ѕшѓu(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓuЋqі┤ѓкѓuЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓu = SOURCE:ЊzЌЖ:Ќ^Ѕшѓu * (2 + TALENT:јтљl:ѓuі┤Њx) / 2
	;Vі┤іo
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓu = SOURCE:ЊzЌЖ:Ќ^Ѕшѓu * SOURCE_REVISION1(ABL:јтљl:ѓuі┤іo) / 10
	;EXP:ѓuїoї▒ѓ­ѓПѓж
	IF EXP:јтљl:ѓuїoї▒ < EXPLV:1
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.30
	ELSEIF EXP:јтљl:ѓuїoї▒ < EXPLV:2
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.50
	ELSEIF EXP:јтљl:ѓuїoї▒ < EXPLV:3
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.80
	ELSEIF EXP:јтљl:ѓuїoї▒ < EXPLV:4
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 1.00
	ELSEIF EXP:јтљl:ѓuїoї▒ < EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 1.20
	ELSEIF EXP:јтљl:ѓuїoї▒ >= EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 1.50
	ENDIF
	;PALAM:ЈЂііѓ­ѓПѓж
	IF PALAM:јтљl:ЈЂіі < PALAMLV:1
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.10
	ELSEIF PALAM:јтљl:ЈЂіі < PALAMLV:2
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.40
	ELSEIF PALAM:јтљl:ЈЂіі < PALAMLV:3
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.60
	ELSEIF PALAM:јтљl:ЈЂіі < PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 0.80
	ELSEIF PALAM:јтљl:ЈЂіі >= PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓu , 1.00
	ENDIF
	LOCAL = SOURCE:ЊzЌЖ:Ќ^Ѕшѓu
	LOCAL:1 = SOURCE:ЊzЌЖ:Ќ^Ѕшѓu
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	IF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.60
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 0.80
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.00
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.20
	ELSEIF PALAM:јтљl:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.50
	ENDIF
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL:1 = LOCAL:1 * SOURCE_REVISION2(ABL:јтљl:Ќ~ќ]) / 100
	;ЈгљlЉ╠ї^
	IF TALENT:јтљl:Љ╠ї^ < -2
		TIMES LOCAL , 0.80
		TIMES LOCAL:1 , 1.20
	ENDIF
	CUP:јтљl:Ѕшѓu += LOCAL
	CUP:јтљl:Ќ~ЈЬ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ќ^Ѕшѓ`(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓ`Ћqі┤ѓкѓ`ЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` = SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` * (2 + TALENT:јтљl:ѓ`і┤Њx) / 2
	;Aі┤іo
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` = SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` * SOURCE_REVISION1(ABL:јтљl:ѓ`і┤іo) / 10
	;EXP:ѓ`їoї▒ѓ­ѓПѓж
	IF EXP:јтљl:ѓ`їoї▒ < EXPLV:1
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.30
	ELSEIF EXP:јтљl:ѓ`їoї▒ < EXPLV:2
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.50
	ELSEIF EXP:јтљl:ѓ`їoї▒ < EXPLV:3
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.80
	ELSEIF EXP:јтљl:ѓ`їoї▒ < EXPLV:4
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 1.00
	ELSEIF EXP:јтљl:ѓ`їoї▒ < EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 1.20
	ELSEIF EXP:јтљl:ѓ`їoї▒ >= EXPLV:5
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 1.50
	ENDIF
	;PALAM:ЈЂііѓ­ѓПѓж
	IF PALAM:јтљl:ЈЂіі < PALAMLV:1
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.40
	ELSEIF PALAM:јтљl:ЈЂіі < PALAMLV:2
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.60
	ELSEIF PALAM:јтљl:ЈЂіі < PALAMLV:3
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.80
	ELSEIF PALAM:јтљl:ЈЂіі < PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 0.90
	ELSEIF PALAM:јтљl:ЈЂіі >= PALAMLV:4
		TIMES SOURCE:ЊzЌЖ:Ќ^Ѕшѓ` , 1.00
	ENDIF
	LOCAL = SOURCE:ЊzЌЖ:Ќ^Ѕшѓ`
	LOCAL:1 = SOURCE:ЊzЌЖ:Ќ^Ѕшѓ`
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	;Ѕшѓ`ѓ═ѓаѓ▄ѓУPALAM:Ќ~ЈЬѓ┼ѓ═ЇиѓфЈoѓ╚ѓб
	IF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.90
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 1.00
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.10
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.20
	ELSEIF PALAM:јтљl:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.30
	ENDIF
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL:1 = LOCAL:1 * SOURCE_REVISION2(ABL:јтљl:Ќ~ќ]) / 100
	;ЈгљlЉ╠ї^
	IF TALENT:јтљl:Љ╠ї^ < -2
		TIMES LOCAL , 0.50
		TIMES LOCAL:1 , 1.50
	ENDIF
	CUP:јтљl:Ѕшѓ` += LOCAL
	CUP:јтљl:Ќ~ЈЬ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ќ^Ѕшѓa(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ѓaЋqі┤ѓкѓaЊПі┤ѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓa = SOURCE:ЊzЌЖ:Ќ^Ѕшѓa * (2 + TALENT:јтљl:ѓaі┤Њx) / 2
	;Bі┤іo
	SOURCE:ЊzЌЖ:Ќ^Ѕшѓa = SOURCE:ЊzЌЖ:Ќ^Ѕшѓa * SOURCE_REVISION1(ABL:јтљl:ѓaі┤іo) / 10
	LOCAL = SOURCE:ЊzЌЖ:Ќ^Ѕшѓa
	;PALAM:Ќ~ЈЬѓ­ѓПѓж
	IF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:1
		TIMES LOCAL , 0.80
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:2
		TIMES LOCAL , 1.00
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:3
		TIMES LOCAL , 1.20
	ELSEIF PALAM:јтљl:Ќ~ЈЬ < PALAMLV:4
		TIMES LOCAL , 1.40
	ELSEIF PALAM:јтљl:Ќ~ЈЬ >= PALAMLV:4
		TIMES LOCAL , 1.60
	ENDIF
	CUP:јтљl:Ѕшѓa += LOCAL
	LOCAL = SOURCE:ЊzЌЖ:Ќ^Ѕшѓa
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	LOCAL = LOCAL * SOURCE_REVISION2(ABL:јтљl:Ќ~ќ]) / 100
	CUP:јтљl:Ќ~ЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_CVAB_EXTRA(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;-------------------------------------------------
	;ІCЌ═ѓOѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮЂiЅшіyїnЂj
	;-------------------------------------------------
	IF BASE:ЊzЌЖ:ІCЌ═ <= 0
		;UP:0,1,2,3ѓ═љРњИѓ╔ЌЇѓяѓ╠ѓ┼љТѓ╔ЈѕЌЮѓхѓ─ѓаѓж
		CUP:ЊzЌЖ:Ѕшѓb /= 2
		CUP:ЊzЌЖ:Ѕшѓu /= 2
		CUP:ЊzЌЖ:Ѕшѓ` /= 2
		CUP:ЊzЌЖ:Ѕшѓa /= 2
	ENDIF
	;-------------------------------------------------
	;ЉіљФѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮЂiЅшіyїnЂj
	;-------------------------------------------------
	IF јтљl < CHARANUM && RELATION:ЊzЌЖ:(NO:јтљl) != 0
		CUP:ЊzЌЖ:Ѕшѓb *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:Ѕшѓb /= 100
		CUP:ЊzЌЖ:Ѕшѓu *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:Ѕшѓu /= 100
		CUP:ЊzЌЖ:Ѕшѓ` *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:Ѕшѓ` /= 100
		CUP:ЊzЌЖ:Ѕшѓa *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:Ѕшѓa /= 100
	ENDIF
	;-------------------------------------------------
	;Ѕші┤ѓ╠ћ█њУѓ═ЂAЅшЃ\Ђ[ЃXѓ╠љћњlѓ╔ЅъѓХѓ─ЂAЌ}ЪTЉЮЅ┴ЂiѕЩЌљѓ┼ќ│їЭЂj
	;-------------------------------------------------
	SIF TALENT:ЊzЌЖ:Ѕші┤ЅъЊџ < 0 && !TALENT:ЊzЌЖ:ѕЩЌљ
		SOURCE:ЊzЌЖ:ЪTІЧ += (CUP:ЊzЌЖ:Ѕшѓb + CUP:ЊzЌЖ:Ѕшѓu + CUP:ЊzЌЖ:Ѕшѓ` + CUP:ЊzЌЖ:Ѕшѓa)/10
	;-------------------------------------------------
	;Љfј┐ѓ╚ѓКѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮЂiЅшіyїnЂj
	;-------------------------------------------------
	;ЏZќЫ
	IF TEQUIP:ЊzЌЖ:ЏZќЫ
		TIMES CUP:ЊzЌЖ:Ѕшѓb , 2.00
		TIMES CUP:ЊzЌЖ:Ѕшѓu , 2.00
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 2.00
		TIMES CUP:ЊzЌЖ:Ѕшѓa , 2.00
	ENDIF
	;ЌўћAЇ▄
	IF TEQUIP:ЊzЌЖ:ЌўћAЇ▄
		TIMES CUP:ЊzЌЖ:Ѕшѓb , 0.70
		TIMES CUP:ЊzЌЖ:Ѕшѓu , 0.70
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 0.70
		TIMES CUP:ЊzЌЖ:Ѕшѓa , 0.70
	ENDIF
	;-------------------------------------------------
	;іОЌјЉfј┐
	;-------------------------------------------------
	;ѕЩЌљ
	IF TALENT:ЊzЌЖ:ѕЩЌљ
		TIMES CUP:ЊzЌЖ:Ѕшѓb , 1.20
		TIMES CUP:ЊzЌЖ:Ѕшѓu , 1.20
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 1.20
		TIMES CUP:ЊzЌЖ:Ѕшѓa , 1.20
	ENDIF
	;-------------------------------------------------
	;Љfј┐
	;-------------------------------------------------
	;јЕљДљS
	IF TALENT:ЊzЌЖ:јЕљДљS
		TIMES CUP:ЊzЌЖ:Ѕшѓb , 0.70
		TIMES CUP:ЊzЌЖ:Ѕшѓu , 0.90
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 1.00
		TIMES CUP:ЊzЌЖ:Ѕшѓa , 0.70
	ENDIF
	;ЉдЌјѓ┐
	IF TALENT:ЊzЌЖ:ЉдЌјѓ┐
		TIMES CUP:ЊzЌЖ:Ѕшѓb , 2.00
		TIMES CUP:ЊzЌЖ:Ѕшѓu , 2.00
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 2.00
		TIMES CUP:ЊzЌЖ:Ѕшѓa , 2.00
	ENDIF
	;јЕѕнІХѓб
	SIF TALENT:ЊzЌЖ:јЕѕнІХѓб
		TIMES CUP:ЊzЌЖ:Ѕшѓb , 1.20
	;ѕЩџР
	SIF TALENT:ЊzЌЖ:ѕЩџР
		TIMES CUP:ЊzЌЖ:Ѕшѓu , 1.20
	;љKїіІХѓб
	SIF TALENT:ЊzЌЖ:љKїіІХѓб
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 1.20
	;ѕЩЊч
	SIF TALENT:ЊzЌЖ:ѕЩЊч
		TIMES CUP:ЊzЌЖ:Ѕшѓa , 1.20
	;ЃIЃgЃR
	IF !(HAS_VAGINA(ЊzЌЖ))
		TIMES CUP:ЊzЌЖ:Ѕшѓ` , 1.30
	ENDIF
	;-------------------------------------------------
	;Њ№ѕНЊxѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮЂiЅшіyїnЂj
	;-------------------------------------------------
	CUP:ЊzЌЖ:Ѕшѓb = CUP:ЊzЌЖ:Ѕшѓb * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:Ѕшѓu = CUP:ЊzЌЖ:Ѕшѓu * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:Ѕшѓ` = CUP:ЊzЌЖ:Ѕшѓ` * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:Ѕшѓa = CUP:ЊzЌЖ:Ѕшѓa * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	;-------------------------------------------------
	;ѕцЅtЈѕЌЮ
	;-------------------------------------------------
	LOCAL:1 = CUP:ЊzЌЖ:Ѕшѓb + CUP:ЊzЌЖ:Ѕшѓu + CUP:ЊzЌЖ:Ѕшѓ` + CUP:ЊzЌЖ:Ѕшѓa
	;ЅшѓbЂ{ЅшѓuЂ{Ѕшѓ`Ђ{ЅшѓaѓфЇЄѓьѓ╣ѓ─100ѕ╚ЈсЈсЈИѓ╚ѓуѓ╗ѓ╠20%ѓ╠ЅtЉ╠ѓ╠Ѓ\Ђ[ЃXѓфЅ┴ѓьѓж
	IF LOCAL:1 > 100
		;ћGѓЖѓРѓиѓбѓкћGѓЖѓ╔ѓГѓбѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
		LOCAL:1 = LOCAL:1 * (10 + 5 * TALENT:ЊzЌЖ:ћGѓЖѓРѓиѓ│) / 10
		SOURCE:ЊzЌЖ:ЅtЉ╠ += LOCAL:1 / 5
	ENDIF

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ЈЬѕц(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ЈЬѕц
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 0.10
		CASE 1
			TIMES LOCAL , 0.50
		CASE 2
			TIMES LOCAL , 1.00
		CASE 3
			TIMES LOCAL , 1.50
		CASE 4
			TIMES LOCAL , 2.00
		CASE 5
			TIMES LOCAL , 2.50
		CASE 6
			TIMES LOCAL , 3.00
		CASE 7
			TIMES LOCAL , 3.50
		CASE 8
			TIMES LOCAL , 4.00
		CASE 9
			TIMES LOCAL , 5.00
		CASEELSE
			TIMES LOCAL , 6.00
	ENDSELECT
	CUP:ЊzЌЖ:І▒ЈЄ += LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ЈЬѕц
	;Ќ~ќ]ѓ­їЕѓж
	SELECTCASE ABL:ЊzЌЖ:Ќ~ќ]
		CASE 0
			TIMES LOCAL , 0.00
		CASE 1
			TIMES LOCAL , 0.40
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 1.20
		CASE 4
			TIMES LOCAL , 1.60
		CASE 5
			TIMES LOCAL , 2.00
		CASE 6
			TIMES LOCAL , 2.40
		CASE 7
			TIMES LOCAL , 2.80
		CASE 8
			TIMES LOCAL , 3.20
		CASE 9
			TIMES LOCAL , 3.60
		CASEELSE
			TIMES LOCAL , 5.00
	ENDSELECT
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_љФЇsЊ«(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:љФЇsЊ«
	;ABL:ІZЇIѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ІZЇI
		CASE 0
			TIMES LOCAL , 0.60
		CASE 1
			TIMES LOCAL , 1.20
		CASE 2
			TIMES LOCAL , 1.80
		CASE 3
			TIMES LOCAL , 2.40
		CASE 4
			TIMES LOCAL , 3.00
		CASE 5
			TIMES LOCAL , 3.60
		CASE 6
			TIMES LOCAL , 4.20
		CASE 7
			TIMES LOCAL , 4.80
		CASE 8
			TIMES LOCAL , 5.40
		CASE 9
			TIMES LOCAL , 6.00
		CASEELSE
			TIMES LOCAL , 7.00
	ENDSELECT
	;ABL:ЋЫјdљИљ_ѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ЋЫјdљИљ_
		CASE 0
			TIMES LOCAL , 0.60
		CASE 1
			TIMES LOCAL , 0.80
		CASE 2
			TIMES LOCAL , 1.00
		CASE 3
			TIMES LOCAL , 1.20
		CASE 4
			TIMES LOCAL , 1.40
		CASE 5
			TIMES LOCAL , 1.70
		CASE 6
			TIMES LOCAL , 2.00
		CASE 7
			TIMES LOCAL , 2.40
		CASE 8
			TIMES LOCAL , 2.80
		CASE 9
			TIMES LOCAL , 4.00
		CASEELSE
			TIMES LOCAL , 5.00
	ENDSELECT
	CUP:ЊzЌЖ:ЈKЊЙ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_њBљг(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:њBљг
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 0.50
		CASE 1
			TIMES LOCAL , 1.00
		CASE 2
			TIMES LOCAL , 1.50
		CASE 3
			TIMES LOCAL , 2.00
		CASE 4
			TIMES LOCAL , 2.50
		CASE 5
			TIMES LOCAL , 3.00
		CASE 6
			TIMES LOCAL , 3.50
		CASE 7
			TIMES LOCAL , 4.00
		CASE 8
			TIMES LOCAL , 4.50
		CASE 9
			TIMES LOCAL , 5.00
		CASEELSE
			TIMES LOCAL , 6.00
	ENDSELECT
	;ABL:ЋЫјdљИљ_ѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ЋЫјdљИљ_
		CASE 0
			TIMES LOCAL , 0.00
		CASE 1
			TIMES LOCAL , 0.50
		CASE 2
			TIMES LOCAL , 1.00
		CASE 3
			TIMES LOCAL , 1.50
		CASE 4
			TIMES LOCAL , 2.00
		CASE 5
			TIMES LOCAL , 2.50
		CASE 6
			TIMES LOCAL , 3.00
		CASE 7
			TIMES LOCAL , 3.50
		CASE 8
			TIMES LOCAL , 4.00
		CASE 9
			TIMES LOCAL , 4.50
		CASEELSE
			TIMES LOCAL , 6.00
	ENDSELECT
	CUP:ЊzЌЖ:І▒ЈЄ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ІЖњ╔(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ІЖњ╔
	LOCAL:1 = SOURCE:ЊzЌЖ:ІЖњ╔
	LOCAL:2 = SOURCE:ЊzЌЖ:ІЖњ╔ / 20
	;Ѓ}Ѓ]ѓ┴ІC
	SELECTCASE ABL:ЊzЌЖ:Ѓ}Ѓ]ѓ┴ІC
		CASE 0
			TIMES LOCAL:1 , 0.00
		CASE 1
			TIMES LOCAL:1 , 0.10
		CASE 2
			TIMES LOCAL:1 , 0.20
		CASE 3
			TIMES LOCAL:1 , 0.30
		CASE 4
			TIMES LOCAL:1 , 0.45
		CASE 5
			TIMES LOCAL:1 , 0.60
		CASE 6
			TIMES LOCAL:1 , 0.75
		CASE 7
			TIMES LOCAL:1 , 0.90
		CASE 8
			TIMES LOCAL:1 , 1.20
		CASE 9
			TIMES LOCAL:1 , 1.50
		CASEELSE
			TIMES LOCAL:1 , 3.00
	ENDSELECT
	;ЈгљlЉ╠ї^
	IF TALENT:ЊzЌЖ:Љ╠ї^ < -2
		TIMES LOCAL , 2.00
		TIMES LOCAL:1 , 0.75
	ENDIF
	;њ▓І│јмѓфЂyЃTЃhЂz
	IF јтљl < CHARANUM && TALENT:јтљl:ЃTЃh
		TIMES LOCAL:1 , 2.50
	ELSEIF јтљl == љlЋе_Іq ;Іqѓ═ЂyЃTЃhЂzѓ┼ѓаѓжѓкЅ╝њУ
		TIMES LOCAL:1 , 2.50
	ELSEIF јтљl == љlЋе_ќKќРјм ;ќKќРјмѓ═ЂyЃTЃhЂzѓ┼ѓаѓжѓкЅ╝њУ
		TIMES LOCAL:1 , 2.50
	ENDIF
	;Ѕ░Ћa
	SIF TALENT:ЊzЌЖ:ЊxІ╣ < 0
		TIMES LOCAL:2 , 2.00
	;Ѓ}Ѓ]ѓ┴ІCѓфѓаѓжѓкPALAM:Ќ~ЈЬѓЯЈсѓфѓж
	;ѓ╗ѓ╠ѓкѓФњ▓І│јмѓфЂyЃTЃhЂzѓЙѓкїЭЅ╩ЊI
	;ІЖњ╔ѓ╔ЅъѓХѓ─І░Ћ|ѓ╠Ѓ\Ђ[ЃXѓфЉЮЅ┴ѓиѓж
	CUP:ЊzЌЖ:ІЖњ╔ += LOCAL
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL:1
	CUP:ЊzЌЖ:І░Ћ| += LOCAL:2

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_І░Ћ|(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL= SOURCE:ЊzЌЖ:І░Ћ|
	;ABL:Ј]ЈЄѓ­ѓПѓжЂiІ░Ћ|ѓТѓУѓ═ѕпЋ|ѓ╔І▀ѓбѓкЅ­ј▀Ђj
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL, 1.00
		CASE 1
			TIMES LOCAL, 1.50
		CASE 2
			TIMES LOCAL, 2.00
		CASE 3
			TIMES LOCAL, 2.50
		CASE 4
			TIMES LOCAL, 3.00
		CASE 5
			TIMES LOCAL, 3.50
		CASE 6
			TIMES LOCAL, 4.00
		CASE 7
			TIMES LOCAL, 4.50
		CASE 8
			TIMES LOCAL, 5.00
		CASE 9
			TIMES LOCAL, 5.50
		CASEELSE
			TIMES LOCAL, 7.00
	ENDSELECT
	CUP:ЊzЌЖ:І░Ћ| += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ЅtЉ╠(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ЅtЉ╠
	;ЈгљlЉ╠ї^
	IF TALENT:ЊzЌЖ:Љ╠ї^ < -2
		SIF SELECTCOM != 50 && SELECTCOM != 180
			TIMES LOCAL , 0.40
	ENDIF
	CUP:ЊzЌЖ:ЈЂіі += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ќ~ЈЬ(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:Ќ~ЈЬ
	;Ќ~ќ]ѓ­їЕѓж
	SELECTCASE ABL:ЊzЌЖ:Ќ~ќ]
		CASE 0
			TIMES LOCAL , 0.20
		CASE 1
			TIMES LOCAL , 0.40
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 1.20
		CASE 4
			TIMES LOCAL , 1.60
		CASE 5
			TIMES LOCAL , 2.00
		CASE 6
			TIMES LOCAL , 2.40
		CASE 7
			TIMES LOCAL , 2.80
		CASE 8
			TIMES LOCAL , 3.20
		CASE 9
			TIMES LOCAL , 3.60
		CASEELSE
			TIMES LOCAL , 5.00
	ENDSELECT
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_І▒ЈЄ(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:І▒ЈЄ
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 0.50
		CASE 0
			TIMES LOCAL , 0.80
		CASE 0
			TIMES LOCAL , 1.00
		CASE 0
			TIMES LOCAL , 1.20
		CASE 0
			TIMES LOCAL , 1.40
		CASE 0
			TIMES LOCAL , 1.60
		CASE 0
			TIMES LOCAL , 1.80
		CASE 0
			TIMES LOCAL , 2.00
		CASE 0
			TIMES LOCAL , 2.40
		CASE 0
			TIMES LOCAL , 3.00
		CASE 0
			TIMES LOCAL , 5.00
	ENDSELECT
	CUP:ЊzЌЖ:І▒ЈЄ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ўIЈo(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;њpѓХѓуѓбѓкњpћќѓбѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SIF TALENT:ЊzЌЖ:схњpљS > 0
		TIMES SOURCE:ЊzЌЖ:ўIЈo , 2.00
	SIF TALENT:ЊzЌЖ:схњpљS < 0
		TIMES SOURCE:ЊzЌЖ:ўIЈo , 0.50
	;ЈЂііЃAЃbЃvѓ╠50ЂЊѓ­ўIЈoѓ╠Ѓ\Ђ[ЃXѓ╔Ѕ┴ѓдѓж
	;ѓйѓЙѓхЅtЉ╠њКЅ┴ѓ╠Ѓ\Ђ[ЃXѓ╠ѓнѓыѓ═ѕЭѓГ
	SOURCE:ЊzЌЖ:ўIЈo += (CUP:ЊzЌЖ:ЈЂіі - SOURCE:ЊzЌЖ:ЅtЉ╠) / 2
	LOCAL = SOURCE:ЊzЌЖ:ўIЈo
	;ABL:ўIЈoЋ╚ѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ўIЈoЋ╚
		CASE 0
			TIMES LOCAL , 0.00
		CASE 1
			TIMES LOCAL , 0.10
		CASE 2
			TIMES LOCAL , 0.20
		CASE 3
			TIMES LOCAL , 0.40
		CASE 4
			TIMES LOCAL , 0.60
		CASE 5
			TIMES LOCAL , 0.80
		CASE 6
			TIMES LOCAL , 1.00
		CASE 7
			TIMES LOCAL , 1.20
		CASE 8
			TIMES LOCAL , 1.40
		CASE 9
			TIMES LOCAL , 1.60
		CASEELSE
			TIMES LOCAL , 2.00
	ENDSELECT
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ўIЈo
	;PALAM:њpЈЬѓ­ѓПѓж
	;њpѓИѓЕѓхѓ│ѓ­і┤ѓХѓЖѓ╬і┤ѓХѓжѓ┘ѓКѓаѓ▄ѓУњpѓИѓЕѓхѓГѓ╚ѓГѓ╚ѓж
	IF PALAM:ЊzЌЖ:њpЈЬ < PALAMLV:1
		TIMES LOCAL , 1.00
	ELSEIF PALAM:ЊzЌЖ:њpЈЬ < PALAMLV:2
		TIMES LOCAL , 0.90
	ELSEIF PALAM:ЊzЌЖ:њpЈЬ < PALAMLV:3
		TIMES LOCAL , 0.80
	ELSEIF PALAM:ЊzЌЖ:њpЈЬ < PALAMLV:4
		TIMES LOCAL , 0.70
	ELSEIF PALAM:ЊzЌЖ:њpЈЬ >= PALAMLV:4
		TIMES LOCAL , 0.60
	ENDIF
	CUP:ЊzЌЖ:њpЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ІЧЈ](ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ІЧЈ]
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 0.50
		CASE 1
			TIMES LOCAL , 1.00
		CASE 2
			TIMES LOCAL , 1.50
		CASE 3
			TIMES LOCAL , 2.00
		CASE 4
			TIMES LOCAL , 2.50
		CASE 5
			TIMES LOCAL , 3.00
		CASE 6
			TIMES LOCAL , 3.50
		CASE 7
			TIMES LOCAL , 4.00
		CASE 8
			TIMES LOCAL , 4.50
		CASE 9
			TIMES LOCAL , 5.00
		CASEELSE
			TIMES LOCAL , 6.00
	ENDSELECT
	;ABL:ЋЫјdљИљ_ѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ЋЫјdљИљ_
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 1.50
		CASE 2
			TIMES LOCAL , 2.00
		CASE 3
			TIMES LOCAL , 2.50
		CASE 4
			TIMES LOCAL , 3.00
		CASE 5
			TIMES LOCAL , 3.50
		CASE 6
			TIMES LOCAL , 4.00
		CASE 7
			TIMES LOCAL , 4.50
		CASE 8
			TIMES LOCAL , 5.00
		CASE 9
			TIMES LOCAL , 5.50
		CASEELSE
			TIMES LOCAL , 7.00
	ENDSELECT
	CUP:ЊzЌЖ:ІЧЋъ += LOCAL

;---------------------------------------------------
;PLAYERѓ╔ѓЯЅeІ┐ѓ­Ќ^ѓдѓжSOURCE
;---------------------------------------------------
@SOURCE_ійіy(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ійіy
	;ЌШЋу
	LOCAL = LOCAL * (10 + 5 * TALENT:ЊzЌЖ:ЌШЋу) / 10
	;ABL:љeќДѓ­ѓПѓж
	IF LOCAL < 100000
		LOCAL = LOCAL * (ABL:ЊzЌЖ:љeќД * 5 + 100) / 100
	ELSEIF LOCAL < 100000000
		LOCAL = LOCAL / 100 * (ABL:ЊzЌЖ:љeќД * 5 + 100)
	ENDIF
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	IF LOCAL < 100000
		LOCAL = LOCAL * (ABL:ЊzЌЖ:Ќ~ќ] * 5 + 100) / 100
	ELSEIF LOCAL < 100000000
		LOCAL = LOCAL / 100 * (ABL:ЊzЌЖ:Ќ~ќ] * 5 + 100)
	ENDIF
	;ЇDі┤Њxѓ­їЕѓж
	IF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 10
		TIMES LOCAL , 0.50
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 50
		TIMES LOCAL , 0.80
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 100
		TIMES LOCAL , 1.00
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 300
		TIMES LOCAL , 1.10
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 500
		TIMES LOCAL , 1.20
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 700
		TIMES LOCAL , 1.30
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 1000
		TIMES LOCAL , 1.40
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 3000
		TIMES LOCAL , 1.50
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 5000
		TIMES LOCAL , 1.70
	ELSEIF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 500000
		IF LOCAL < 100000
			LOCAL = LOCAL * (CFLAG:ЊzЌЖ:ЇDі┤Њx / 50 + 100) / 100
		ELSEIF LOCAL < 10000000
			LOCAL = LOCAL / 100 * (CFLAG:ЊzЌЖ:ЇDі┤Њx / 50 + 100)
		ELSEIF LOCAL < 100000000
			IF CFLAG:ЊzЌЖ:ЇDі┤Њx <= 50000
				LOCAL = LOCAL / 100 * (CFLAG:ЊzЌЖ:ЇDі┤Њx / 50 + 100)
			ELSE
				LOCAL = 1000000000
			ENDIF
		ENDIF
	ENDIF
	CUP:ЊzЌЖ:ЇDѕМ += LOCAL
	IF јтљl < CHARANUM
		CUP:јтљl:Ќ~ЈЬ += MIN(LOCAL / 10 , 100)
	ENDIF

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_љфЋъ(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;њnѕ╩ѓ┼ЋфіЫ
	IF јтљl < CHARANUM && CFLAG:ЊzЌЖ:310 > CFLAG:јтљl:310
		;Їѓѕ╩ѓ╠ЃLЃЃЃЅ
		LOCAL:1 = SOURCE:ЊzЌЖ:љфЋъ / 4
		;ABL:Ќ~ќ]ѓ­ѓПѓж
		SELECTCASE ABL:ЊzЌЖ:Ќ~ќ]
			CASE 0
				TIMES LOCAL:1 , 0.10
			CASE 1
				TIMES LOCAL:1 , 0.15
			CASE 2
				TIMES LOCAL:1 , 0.20
			CASE 3
				TIMES LOCAL:1 , 0.25
			CASE 4
				TIMES LOCAL:1 , 0.30
			CASEELSE
				IF LOCAL:1 < 100000
					LOCAL:1 = LOCAL:1 * (ABL:ЊzЌЖ:Ќ~ќ] * 5 + 15) / 100
				ELSEIF LOCAL:1 < 100000000
					LOCAL:1 = LOCAL:1 / 100 * (ABL:ЊzЌЖ:Ќ~ќ] * 5 + 15)
				ENDIF
		ENDSELECT
		;ABL:ЃTЃhѓ┴ІCѓ­ѓПѓж
		IF LOCAL:1 < 100000
			LOCAL:1 = LOCAL:1 * (ABL:ЊzЌЖ:ЃTЃhѓ┴ІC * 30 + 100) / 100
		ELSEIF LOCAL:1 < 100000000
			LOCAL:1 = LOCAL:1 / 100 * (ABL:ЊzЌЖ:ЃTЃhѓ┴ІC * 30 + 100)
		ENDIF
	ELSE
		;њрѕ╩ѓ╠ЃLЃЃЃЅ
		LOCAL:2 = SOURCE:ЊzЌЖ:љфЋъ / 2
		;ABL:љeќДѓ­ѓПѓж
		SELECTCASE ABL:ЊzЌЖ:љeќД
			CASE 0
				TIMES LOCAL:2 , 0.10
			CASE 1
				TIMES LOCAL:2 , 0.15
			CASE 2
				TIMES LOCAL:2 , 0.20
			CASE 3
				TIMES LOCAL:2 , 0.25
			CASE 4
				TIMES LOCAL:2 , 0.30
			CASEELSE
				IF LOCAL:2 < 100000
					LOCAL:2 = LOCAL:2 * (ABL:ЊzЌЖ:љeќД * 5 + 15) / 100
				ELSEIF LOCAL:2 < 100000000
					LOCAL:2 = LOCAL:2 / 100 * (ABL:ЊzЌЖ:љeќД * 5 + 15)
				ENDIF
		ENDSELECT
	ENDIF
	LOCAL = SOURCE:ЊzЌЖ:љфЋъ
	;ABL:ЃTЃhѓ┴ІCѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ЃTЃhѓ┴ІC
		CASE 0
			TIMES LOCAL , 0.70
		CASE 1
			TIMES LOCAL , 1.00
		CASE 2
			TIMES LOCAL , 1.30
		CASE 3
			TIMES LOCAL , 1.70
		CASE 4
			TIMES LOCAL , 2.00
		CASEELSE
			IF LOCAL < 100000
				LOCAL = LOCAL * (ABL:ЊzЌЖ:ЃTЃhѓ┴ІC * 15 + 175) / 100
			ELSEIF LOCAL < 100000000
				LOCAL = LOCAL / 100 * (ABL:ЊzЌЖ:ЃTЃhѓ┴ІC * 15 + 175)
			ENDIF
	ENDSELECT
	CUP:ЊzЌЖ:ЌDЅz += LOCAL
	CUP:ЊzЌЖ:Ќ~ЈЬ += LOCAL:1
	IF јтљl < CHARANUM
		CUP:јтљl:ІЧЋъ += LOCAL:1
	ENDIF
	CUP:ЊzЌЖ:њpЈЬ += LOCAL:2

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_јзЊ«(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	IF јтљl > CHARANUM || CFLAG:ЊzЌЖ:310 > CFLAG:јтљl:310
		;Їѓѕ╩ѓ╠ЃLЃЃЃЅ
		LOCAL:1 = SOURCE:ЊzЌЖ:јзЊ« / 3
		;ABL:Ќ~ќ]ѓ­ѓПѓж
		SELECTCASE ABL:ЊzЌЖ:Ќ~ќ]
			CASE 0
				TIMES LOCAL:1 , 0.30
			CASE 1
				TIMES LOCAL:1 , 0.35
			CASE 2
				TIMES LOCAL:1 , 0.40
			CASE 3
				TIMES LOCAL:1 , 0.45
			CASE 4
				TIMES LOCAL:1 , 0.50
			CASEELSE
				IF LOCAL:1 < 100000
					LOCAL:1 = LOCAL:1 * (ABL:ЊzЌЖ:Ќ~ќ] * 10 + 10) / 100
				ELSEIF LOCAL:1 < 100000000
					LOCAL:1 = LOCAL:1 / 100 * (ABL:ЊzЌЖ:Ќ~ќ] * 10 + 10)
				ENDIF
		ENDSELECT
	ELSE
		LOCAL:2 = SOURCE:ЊzЌЖ:јзЊ« / 2
		;ABL:ЋЫјdљИљ_ѓ­ѓПѓж
		SELECTCASE ABL:ЊzЌЖ:ЋЫјdљИљ_
			CASE 0
				TIMES LOCAL:2 , 0.30
			CASE 1
				TIMES LOCAL:2 , 0.35
			CASE 2
				TIMES LOCAL:2 , 0.40
			CASE 3
				TIMES LOCAL:2 , 0.45
			CASE 4
				TIMES LOCAL:2 , 0.50
			CASEELSE
				IF LOCAL:2 < 100000
					LOCAL:2 = LOCAL:2 * (ABL:ЊzЌЖ:ЋЫјdљИљ_ * 10 + 10) / 100
				ELSEIF LOCAL:2 < 100000000
					LOCAL:2 = LOCAL:2 / 100 * (ABL:ЊzЌЖ:ЋЫјdљИљ_ * 10 + 10)
				ENDIF
		ENDSELECT
	ENDIF
	LOCAL = SOURCE:ЊzЌЖ:јзЊ«
	;ABL:љeќДѓ­ѓПѓж
	IF LOCAL < 100000
		LOCAL = LOCAL * (ABL:ЊzЌЖ:љeќД * 10 + 70) / 100
	ELSEIF LOCAL < 100000000
		LOCAL = LOCAL / 100 * (ABL:ЊzЌЖ:љeќД * 10 + 70)
	ENDIF
	CUP:ЊzЌЖ:ЇDѕМ += LOCAL
	CUP:ЊzЌЖ:ІЧЋъ += LOCAL:1
	IF јтљl < CHARANUM
		CUP:јтљl:І▒ЈЄ += LOCAL:1
	ENDIF
	CUP:ЊzЌЖ:І▒ЈЄ += LOCAL:2

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ЌUўf(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	SOURCE:ЊzЌЖ:ЌUўf = SOURCE:ЊzЌЖ:ЌUўf * GET_REVISION(ABL:ЊzЌЖ:Ќ~ќ] + 2, 500, 10) / 100
	LOCAL = SOURCE:ЊzЌЖ:ЌUўf
	LOCAL:1 = SOURCE:ЊzЌЖ:ЌUўf
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:Ќ~ќ], 500, 20)) / 100
	CUP:јтљl:Ќ~ЈЬ += LOCAL
	LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:јтљl:Ј]ЈЄ, 500, 5)) / 100
	CUP:јтљl:І▒ЈЄ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_љJѓ▀(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	SOURCE:ЊzЌЖ:љJѓ▀ = SOURCE:ЊzЌЖ:љJѓ▀ * GET_REVISION(ABL:ЊzЌЖ:ЃTЃhѓ┴ІC + 2, 500, 10) / 100
	LOCAL = SOURCE:ЊzЌЖ:љJѓ▀
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:Ѓ}Ѓ]ѓ┴ІC, 500, 20)) / 100
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:ўIЈoЋ╚, 500, 20)) / 100
	;PALAM:њpЈЬѓ­ѓПѓж
	;њpѓИѓЕѓхѓ│ѓ­і┤ѓХѓЖѓ╬і┤ѓХѓжѓ┘ѓКѓаѓ▄ѓУњpѓИѓЕѓхѓГѓ╚ѓГѓ╚ѓж
	IF PALAM:јтљl:њpЈЬ < PALAMLV:1
		TIMES LOCAL , 1.00
	ELSEIF PALAM:јтљl:њpЈЬ < PALAMLV:2
		TIMES LOCAL , 0.90
	ELSEIF PALAM:јтљl:њpЈЬ < PALAMLV:3
		TIMES LOCAL , 0.80
	ELSEIF PALAM:јтљl:њpЈЬ < PALAMLV:4
		TIMES LOCAL , 0.70
	ELSEIF PALAM:јтљl:њpЈЬ >= PALAMLV:4
		TIMES LOCAL , 0.60
	ENDIF
	CUP:јтљl:њpЈЬ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_њДћГ(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	SOURCE:ЊzЌЖ:њДћГ = SOURCE:ЊzЌЖ:њДћГ * GET_REVISION(ABL:ЊzЌЖ:ЃTЃhѓ┴ІC + 2, 500, 10) / 100
	LOCAL = SOURCE:ЊzЌЖ:њДћГ
	LOCAL:1 = SOURCE:ЊzЌЖ:њДћГ
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:Ќ~ќ], 500, 10)) / 100
	CUP:јтљl:Ќ~ЈЬ += LOCAL
	LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:јтљl:Ѓ}Ѓ]ѓ┴ІC, 500, 5)) / 100
	CUP:јтљl:ІЧЋъ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ЋЫјd(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	SOURCE:ЊzЌЖ:ЋЫјd = SOURCE:ЊzЌЖ:ЋЫјd * GET_REVISION(ABL:ЊzЌЖ:ІZЇI + ABL:ЊzЌЖ:ЋЫјdљИљ_ + 2, 500, 10) / 100
	LOCAL = SOURCE:ЊzЌЖ:ЋЫјd
	LOCAL:1 = SOURCE:ЊzЌЖ:ЋЫјd
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:Ќ~ќ], 500, 10)) / 100
	CUP:јтљl:Ќ~ЈЬ += LOCAL
	LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:јтљl:Ѓ}Ѓ]ѓ┴ІC, 500, 5)) / 100
	CUP:јтљl:ІЧЋъ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ІГЌv(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	SOURCE:ЊzЌЖ:ІГЌv = SOURCE:ЊzЌЖ:ІГЌv * GET_REVISION(ABL:ЊzЌЖ:ЃTЃhѓ┴ІC +ABL:ЊzЌЖ:Ќ~ќ] + 2, 500, 10) / 100
	LOCAL = SOURCE:ЊzЌЖ:ІГЌv
	LOCAL:1 = SOURCE:ЊzЌЖ:ІГЌv
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:ЋЫјdљИљ_, 500, 5)) / 100
	CUP:јтљl:І▒ЈЄ += LOCAL
	LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:јтљl:Ј]ЈЄ, 500, 10)) / 100
	CUP:јтљl:ІЧЋъ += LOCAL:1

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_Ѕ┴Іs(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	SOURCE:ЊzЌЖ:Ѕ┴Іs = SOURCE:ЊzЌЖ:Ѕ┴Іs * GET_REVISION(ABL:ЊzЌЖ:ЃTЃhѓ┴ІC + ABL:ЊzЌЖ:Ќ~ќ] + 2, 500, 5) / 100
	LOCAL = SOURCE:ЊzЌЖ:Ѕ┴Іs
	LOCAL:1 = SOURCE:ЊzЌЖ:Ѕ┴Іs
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:Ѓ}Ѓ]ѓ┴ІC, 500, 10)) / 100
	CUP:јтљl:ІЖњ╔ += LOCAL
	LOCAL = LOCAL * (100 + GET_REVISION(ABL:јтљl:Ѓ}Ѓ]ѓ┴ІC, 500, 5)) / 100
	CUP:јтљl:І░Ћ| += LOCAL
	LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:јтљl:Ј]ЈЄ, 500, 10)) / 100
	CUP:јтљl:ІЧЋъ += LOCAL:1

;---------------------------------------------------
;Ѓ}ЃCЃiЃXSOURCE
;---------------------------------------------------
@SOURCE_ЋsїЅ(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ЋsїЅ
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.90
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 0.70
		CASE 4
			TIMES LOCAL , 0.60
		CASE 5
			TIMES LOCAL , 0.50
		CASE 6
			TIMES LOCAL , 0.40
		CASE 7
			TIMES LOCAL , 0.30
		CASE 8
			TIMES LOCAL , 0.20
		CASE 9
			TIMES LOCAL , 0.10
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ї«ѓ­јЮѓ┴ѓ─ѓбѓжѓкЋsЅшњрЅ║
	IF FLAG:њтЉђЉЛї«ЇwЊЧЃtЃЅЃO == ЊzЌЖ
		TIMES LOCAL , 0.20
	ENDIF	
	CUP:ЊzЌЖ:ЋsЅш += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ЪTІЧ(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ЪTІЧ
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.80
		CASE 2
			TIMES LOCAL , 0.60
		CASE 3
			TIMES LOCAL , 0.40
		CASE 4
			TIMES LOCAL , 0.30
		CASE 5
			TIMES LOCAL , 0.20
		CASE 6
			TIMES LOCAL , 0.10
		CASE 7
			TIMES LOCAL , 0.08
		CASE 8
			TIMES LOCAL , 0.06
		CASE 9
			TIMES LOCAL , 0.04
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ABL:Ќ~ќ]ѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ќ~ќ]
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.90
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 0.70
		CASE 4
			TIMES LOCAL , 0.60
		CASE 5
			TIMES LOCAL , 0.50
		CASE 6
			TIMES LOCAL , 0.40
		CASE 7
			TIMES LOCAL , 0.30
		CASE 8
			TIMES LOCAL , 0.20
		CASE 9
			TIMES LOCAL , 0.10
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	CUP:ЊzЌЖ:Ќ}ЪT += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ѕьњE(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;ЇDі№љSѓкЋ█јуЊIѓ═ѓ▒ѓ▒ѓ┼ЈѕЌЮ
	SIF TALENT:ЊzЌЖ:љФЊIІ╗ќА > 0
		TIMES SOURCE:ЊzЌЖ:ѕьњE , 0.80
	SIF TALENT:ЊzЌЖ:љФЊIІ╗ќА < 0
		TIMES SOURCE:ЊzЌЖ:ѕьњE , 2.00
	LOCAL = SOURCE:ЊzЌЖ:ѕьњE
	;ABL:Ј]ЈЄѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ј]ЈЄ
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.80
		CASE 2
			TIMES LOCAL , 0.60
		CASE 3
			TIMES LOCAL , 0.40
		CASE 4
			TIMES LOCAL , 0.30
		CASE 5
			TIMES LOCAL , 0.20
		CASE 6
			TIMES LOCAL , 0.10
		CASE 7
			TIMES LOCAL , 0.08
		CASE 8
			TIMES LOCAL , 0.06
		CASE 9
			TIMES LOCAL , 0.04
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ABL:Ѓ}Ѓ]ѓ┴ІCѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ѓ}Ѓ]ѓ┴ІC
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.90
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 0.70
		CASE 4
			TIMES LOCAL , 0.60
		CASE 5
			TIMES LOCAL , 0.50
		CASE 6
			TIMES LOCAL , 0.40
		CASE 7
			TIMES LOCAL , 0.30
		CASE 8
			TIMES LOCAL , 0.20
		CASE 9
			TIMES LOCAL , 0.10
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ї«ѓ­јЮѓ┴ѓ─ѓбѓжѓкїИЈГ
	IF FLAG:њтЉђЉЛї«ЇwЊЧЃtЃЅЃO == ЊzЌЖ
		TIMES LOCAL , 0.20
	ENDIF	
	CUP:ЊzЌЖ:ћйі┤ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_ћйі┤(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	LOCAL = SOURCE:ЊzЌЖ:ћйі┤
	;ABL:Ј]ЈЄѓ­ѓПѓж
	LOCAL:1 = ABL:ЊzЌЖ:Ј]ЈЄ + ABL:ЊzЌЖ:љeќД
	SELECTCASE LOCAL:1
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.80
		CASE 2
			TIMES LOCAL , 0.60
		CASE 3
			TIMES LOCAL , 0.40
		CASE 4
			TIMES LOCAL , 0.30
		CASE 5
			TIMES LOCAL , 0.20
		CASE 6
			TIMES LOCAL , 0.10
		CASE 7
			TIMES LOCAL , 0.08
		CASE 8
			TIMES LOCAL , 0.06
		CASE 9
			TIMES LOCAL , 0.04
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ABL:ЋЫјdљИљ_ѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:ЋЫјdљИљ_
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.90
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 0.70
		CASE 4
			TIMES LOCAL , 0.60
		CASE 5
			TIMES LOCAL , 0.50
		CASE 6
			TIMES LOCAL , 0.40
		CASE 7
			TIMES LOCAL , 0.30
		CASE 8
			TIMES LOCAL , 0.20
		CASE 9
			TIMES LOCAL , 0.10
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ABL:Ѓ}Ѓ]ѓ┴ІCѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ѓ}Ѓ]ѓ┴ІC
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.90
		CASE 2
			TIMES LOCAL , 0.80
		CASE 3
			TIMES LOCAL , 0.70
		CASE 4
			TIMES LOCAL , 0.60
		CASE 5
			TIMES LOCAL , 0.50
		CASE 6
			TIMES LOCAL , 0.40
		CASE 7
			TIMES LOCAL , 0.30
		CASE 8
			TIMES LOCAL , 0.20
		CASE 9
			TIMES LOCAL , 0.10
		CASEELSE
			TIMES LOCAL , 0.00
	ENDSELECT
	;ї«ѓ­јЮѓ┴ѓ─ѓбѓжѓкїИЈГ
	IF FLAG:њтЉђЉЛї«ЇwЊЧЃtЃЅЃO == ЊzЌЖ
		TIMES LOCAL , 0.20
	ENDIF	
	CUP:ЊzЌЖ:ћйі┤ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_EXTRA(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	VARSET LOCAL
	;-------------------------------------------------
	;ЉЋћшїnЂiќЫЊЎЂj
	;-------------------------------------------------
	;ЏZќЫ
	IF TEQUIP:ЊzЌЖ:ЏZќЫ
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.20
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 2.00
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
		TIMES CUP:ЊzЌЖ:ЋsЅш , 0.75
	ENDIF
	;ЌўћAЇ▄
	IF TEQUIP:ЊzЌЖ:ЌўћAЇ▄
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:њpЈЬ , 1.20
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.50
		TIMES CUP:ЊzЌЖ:ЋsЅш , 1.20
	ENDIF
	;ї«ѓ­јЮѓ┴ѓ─ѓбѓжѓкїИЈГ
	IF FLAG:њтЉђЉЛї«ЇwЊЧЃtЃЅЃO == ЊzЌЖ
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.20
		TIMES CUP:ЊzЌЖ:ЋsЅш , 0.20
	ENDIF	
	;-------------------------------------------------
	;іОЌјЉfј┐
	;-------------------------------------------------
	;ЌШЋу
	IF TALENT:ЊzЌЖ:ЌШЋу && ASSIPLAY == 0
		CUP:ЊzЌЖ:І▒ЈЄ = CUP:ЊzЌЖ:І▒ЈЄ * (10 + 5 * TALENT:ЊzЌЖ:ЌШЋу) / 10
		CUP:ЊzЌЖ:ІЧЋъ = CUP:ЊzЌЖ:ІЧЋъ * (10 + 5 * TALENT:ЊzЌЖ:ЌШЋу) / 10
		SIF CUP:ЊzЌЖ:ЇDѕМ < 999999999
			CUP:ЊzЌЖ:ЇDѕМ = CUP:ЊzЌЖ:ЇDѕМ * (10 + 5 * TALENT:ЊzЌЖ:ЌШЋу) / 10
		CUP:ЊzЌЖ:ћйі┤ = CUP:ЊzЌЖ:ћйі┤ * (10 - 4 * TALENT:ЊzЌЖ:ЌШЋу) / 10
		CUP:ЊzЌЖ:ЋsЅш = CUP:ЊzЌЖ:ЋsЅш * (10 - 4 * TALENT:ЊzЌЖ:ЌШЋу) / 10
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 0.50
	ELSEIF TALENT:ЊzЌЖ:ЌШЋу && ASSIPLAY > 0
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		TIMES CUP:ЊzЌЖ:ЋsЅш , 1.20
	ENDIF
	;ѕЩЌљ
	IF TALENT:ЊzЌЖ:ѕЩЌљ
		CUP:ЊzЌЖ:І▒ЈЄ = CUP:ЊzЌЖ:І▒ЈЄ * (10 + 2 * TALENT:ЊzЌЖ:ѕЩЌљ) / 10
		CUP:ЊzЌЖ:ІЧЋъ = CUP:ЊzЌЖ:ІЧЋъ * (10 + 2 * TALENT:ЊzЌЖ:ѕЩЌљ) / 10
		CUP:ЊzЌЖ:ћйі┤ = CUP:ЊzЌЖ:ћйі┤ * (10 - 2 * TALENT:ЊzЌЖ:ѕЩЌљ) / 10
		CUP:ЊzЌЖ:ЋsЅш = CUP:ЊzЌЖ:ЋsЅш * (10 - 2 * TALENT:ЊzЌЖ:ѕЩЌљ) / 10
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 0.40
	ENDIF
	;-------------------------------------------------
	;Љfј┐
	;-------------------------------------------------
	;ІCЈС
	IF TALENT:ЊzЌЖ:ЊxІ╣ > 0
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:І░Ћ| , 0.80
		TIMES CUP:ЊzЌЖ:ЇDѕМ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 1.20
	ENDIF
	;Ѕ░Ћa
	IF TALENT:ЊzЌЖ:ЊxІ╣ < 0
		TIMES CUP:ЊzЌЖ:І░Ћ| , 1.20
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
	ENDIF
	;ћйЇRЊIЂiЋъЈ]ЂAЌЖЉ«ѓ┼ќ│їЭЂj
	IF TALENT:ЊzЌЖ:ЉнЊx > 0 && !TALENT:ЊzЌЖ:ЋъЈ]
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:ЇDѕМ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
	ENDIF
	;Љfњ╝
	IF TALENT:ЊzЌЖ:ЉнЊx < 0
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.20
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
		SIF CUP:ЊzЌЖ:ЇDѕМ < 999999999
			TIMES CUP:ЊzЌЖ:ЇDѕМ , 1.50
	ENDIF
	;љХѕМІC
	IF TALENT:ЊzЌЖ:ЅъЊџ > 0
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
	ENDIF
	;Љтљlѓхѓб
	IF TALENT:ЊzЌЖ:ЅъЊџ < 0
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
	ENDIF
	;ЃvЃЅЃCЃhЇѓѓб
	IF TALENT:ЊzЌЖ:ЃvЃЅЃCЃh > 0
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:І░Ћ| , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
	ENDIF
	;ЃvЃЅЃCЃhњрѓб
	IF TALENT:ЊzЌЖ:ЃvЃЅЃCЃh < 0
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
		TIMES CUP:ЊzЌЖ:І░Ћ| , 1.20
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
	ENDIF
	;ЃcЃЊЃfЃї
	IF TALENT:ЊzЌЖ:ЃcЃЊЃfЃї
		;іОЌјЉfј┐ѓфѓаѓжЈЖЇЄѓкќ│ѓбЈЖЇЄѓ┼Ћ¤Ѕ╗ѓиѓж
		IF TALENT:ЊzЌЖ:ЌШЋу || TALENT:ЊzЌЖ:ѕЩЌљ || TALENT:ЊzЌЖ:ЋъЈ]
			TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.20
			TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
			TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
		ELSE
			TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
			TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
			TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		ENDIF
	ENDIF
	;јЕљДљS
	IF TALENT:ЊzЌЖ:јЕљДљS
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:І░Ћ| , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
	ENDIF
	;ќ│іољS
	IF TALENT:ЊzЌЖ:ќ│іољS
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:ЇDѕМ , 0.80
		TIMES CUP:ЊzЌЖ:І░Ћ| , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
	ENDIF
	;і┤ЈЬќRѓхѓб
	IF TALENT:ЊzЌЖ:і┤ЈЬќRѓхѓб
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:њpЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:І░Ћ| , 0.80
		TIMES CUP:ЊzЌЖ:ЇDѕМ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
		TIMES CUP:ЊzЌЖ:ЋsЅш , 0.80
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 0.80
	ENDIF
	;ЇDі№љS
	SIF TALENT:ЊzЌЖ:љФЊIІ╗ќА > 0
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 1.20
	;Ћ█јуЊI
	SIF TALENT:ЊzЌЖ:љФЊIІ╗ќА < 0
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 0.80
	;іyі¤ЊI
	SIF TALENT:ЊzЌЖ:ЌzІCЂ^ЅAІC > 0
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 0.80
	;ћ▀і¤ЊI
	SIF TALENT:ЊzЌЖ:ЌzІCЂ^ЅAІC < 0
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 1.20
	;ќ┌ЌДѓ┐ѓйѓфѓУ
	SIF TALENT:ЊzЌЖ:ќ┌ЌДѓ┐ѓйѓфѓУ
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.20
	;Ќ}ѕ│
	IF TALENT:ЊzЌЖ:јЕї╚ѕц < 0
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 1.20
	ENDIF
	;Ѕ­ЋЩ
	IF TALENT:ЊzЌЖ:јЕї╚ѕц > 0
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 1.20
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
	ENDIF
	;њ№ЇR
	IF TALENT:ЊzЌЖ:њ№ЇR
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 1.20
	ENDIF
	;њ╔іo
	CUP:ЊzЌЖ:ІЖњ╔ = CUP:ЊzЌЖ:ІЖњ╔ * (10 + 2 * TALENT:ЊzЌЖ:њ╔іo) / 10
	;ЈKЊЙЉгЊx
	CUP:ЊzЌЖ:ЈKЊЙ = CUP:ЊzЌЖ:ЈKЊЙ * (10 + 2 * TALENT:ЊzЌЖ:ЈKЊЙЉгЊx) / 10
	;їБљgЊI
	SIF TALENT:ЊzЌЖ:їБљgЊI
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
	;Ѕші┤ѓ╔Љfњ╝
	SIF TALENT:ЊzЌЖ:Ѕші┤ЅъЊџ > 0
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 1.20
	;Ѕші┤ѓ╠ћ█њУЂiѕЩЌљЂAЈЕЋwѓ┼ќ│їЭЂj
	SIF TALENT:ЊzЌЖ:Ѕші┤ЅъЊџ < 0 && !TALENT:ЊzЌЖ:ѕЩЌљ
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
	;ЉдЌјѓ┐
	IF TALENT:ЊzЌЖ:ЉдЌјѓ┐
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 2.00
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 2.00
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 2.00
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 2.00
		TIMES CUP:ЊzЌЖ:њpЈЬ , 2.00
		TIMES CUP:ЊzЌЖ:І░Ћ| , 2.00
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.50
		TIMES CUP:ЊzЌЖ:ЋsЅш , 0.50
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 0.50
	ENDIF
	;јЕѕнІХѓб
	SIF TALENT:ЊzЌЖ:јЕѕнІХѓб
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 1.20
	;ѕЩџР
	SIF TALENT:ЊzЌЖ:ѕЩџР
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.20
	;љKїіІХѓб
	SIF TALENT:ЊzЌЖ:љKїіІХѓб
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
	;ѕЩЊч
	SIF TALENT:ЊzЌЖ:ѕЩЊч
		TIMES CUP:ЊzЌЖ:њpЈЬ , 1.20
	;Њ|ЇШЊI
	IF TALENT:ЊzЌЖ:Њ|ЇШЊI
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
		TIMES CUP:ЊzЌЖ:њpЈЬ , 1.20
	ENDIF
	;њjїЎѓбЂiЈЌљФѓ╠ѓПЌШЋуЂAљeѕцѓ┼ќ│їЭЂj
	IF TALENT:ЊzЌЖ:љФЋ╩џnЇD & 1 && !(HAS_VAGINA(PLAYER)) && (!TALENT:ЊzЌЖ:ЌШЋу || PLAYER != MASTER)
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		TIMES CUP:ЊzЌЖ:ЋsЅш , 1.20
	ENDIF
	;ЃTЃh
	IF TALENT:ЊzЌЖ:ЃTЃh
		TIMES CUP:ЊzЌЖ:ЌDЅz , 2.00
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:І░Ћ| , 0.80
	ENDIF
	;Ѓ}Ѓ]
	IF TALENT:ЊzЌЖ:Ѓ}Ѓ]
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
		TIMES CUP:ЊzЌЖ:І░Ћ| , 1.20
		TIMES CUP:ЊzЌЖ:Ќ}ЪT , 0.80
	ENDIF
	IF TALENT:ЊzЌЖ:ЈгѕФќѓ
		TIMES CUP:ЊzЌЖ:ЌDЅz , 1.50
	ENDIF
	;ќ¤љM
	IF TALENT:ЊzЌЖ:ќ¤љM
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
		TIMES CUP:ЊzЌЖ:ћйі┤ , 0.80
	ENDIF
	;ЈЌїЎѓбЂiњjљФѓ╠ѓПЌШЋуЂAљeѕцѓ┼ќ│їЭЂj
	IF TALENT:ЊzЌЖ:љФЋ╩џnЇD & 2 && (HAS_VAGINA(PLAYER)) && (!TALENT:ЊzЌЖ:ЌШЋу || PLAYER != MASTER )
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.80
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 0.80
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 0.80
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 0.80
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
		TIMES CUP:ЊzЌЖ:ЋsЅш , 1.20
	ENDIF
	;-------------------------------------------------
	;ѓ╗ѓ╠Љ╝
	;-------------------------------------------------
	;ІЖњ╔ЇЈѕз
	IF MARK:ЊzЌЖ:ІЖњ╔ЇЈѕз == 3
		TIMES CUP:ЊzЌЖ:ІЖњ╔ , 1.30
		TIMES CUP:ЊzЌЖ:І░Ћ| , 1.30
	ELSEIF MARK:ЊzЌЖ:ІЖњ╔ЇЈѕз == 2
		TIMES CUP:ЊzЌЖ:ІЖњ╔ , 1.20
		TIMES CUP:ЊzЌЖ:І░Ћ| , 1.20
	ELSEIF MARK:ЊzЌЖ:ІЖњ╔ЇЈѕз == 1
		TIMES CUP:ЊzЌЖ:ІЖњ╔ , 1.10
		TIMES CUP:ЊzЌЖ:І░Ћ| , 1.10
	ENDIF
	;ЅшіyЇЈѕз
	IF MARK:ЊzЌЖ:ЅшіyЇЈѕз == 3
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 1.30
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 1.30
	ELSEIF MARK:ЊzЌЖ:ЅшіyЇЈѕз == 2
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 1.20
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 1.20
	ELSEIF MARK:ЊzЌЖ:ЅшіyЇЈѕз == 1
		TIMES CUP:ЊzЌЖ:Ќ~ЈЬ , 1.10
		TIMES CUP:ЊzЌЖ:ЈKЊЙ , 1.10
	ENDIF
	;ІЧЋъЇЈѕз
	IF MARK:ЊzЌЖ:ІЧЋъЇЈѕз == 3
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.30
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.30
	ELSEIF MARK:ЊzЌЖ:ІЧЋъЇЈѕз == 2
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.20
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.20
	ELSEIF MARK:ЊzЌЖ:ІЧЋъЇЈѕз == 1
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 1.10
		TIMES CUP:ЊzЌЖ:ІЧЋъ , 1.10
	ENDIF
	;ћйћГЇЈѕз
	IF MARK:ЊzЌЖ:ћйћГЇЈѕз == 3
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.10
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.30
	ELSEIF MARK:ЊzЌЖ:ћйћГЇЈѕз == 2
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.40
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.20
	ELSEIF MARK:ЊzЌЖ:ћйћГЇЈѕз == 1
		TIMES CUP:ЊzЌЖ:І▒ЈЄ , 0.60
		TIMES CUP:ЊzЌЖ:ћйі┤ , 1.10
	ENDIF
	;-------------------------------------------------
	;Њ№ѕНЊxѓ╚ѓКѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮ
	;-------------------------------------------------
	CUP:ЊzЌЖ:ЈЂіі = CUP:ЊzЌЖ:ЈЂіі * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:І▒ЈЄ = CUP:ЊzЌЖ:І▒ЈЄ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:Ќ~ЈЬ = CUP:ЊzЌЖ:Ќ~ЈЬ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ІЧЋъ = CUP:ЊzЌЖ:ІЧЋъ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ЈKЊЙ = CUP:ЊzЌЖ:ЈKЊЙ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:њpЈЬ = CUP:ЊzЌЖ:њpЈЬ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ІЖњ╔ = CUP:ЊzЌЖ:ІЖњ╔ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:І░Ћ| = CUP:ЊzЌЖ:І░Ћ| * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ЇDѕМ = CUP:ЊzЌЖ:ЇDѕМ * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ЌDЅz = CUP:ЊzЌЖ:ЌDЅz * (16 - 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ћйі┤ = CUP:ЊzЌЖ:ћйі┤ * (8 +  4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:ЋsЅш = CUP:ЊzЌЖ:ЋsЅш * (8 + 4 * FLAG:Њ№ѕНЊx) / 10
	CUP:ЊzЌЖ:Ќ}ЪT = CUP:ЊzЌЖ:Ќ}ЪT * (8 + 4 * FLAG:Њ№ѕНЊx) / 10
	;-------------------------------------------------
	;ЉіљФѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮ
	;-------------------------------------------------
	IF јтљl < CHARANUM && RELATION:ЊzЌЖ:(NO:јтљl) != 0
		CUP:ЊzЌЖ:Ќ~ЈЬ *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:Ќ~ЈЬ /= 100
		CUP:ЊzЌЖ:ІЧЋъ *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:ІЧЋъ /= 100
		CUP:ЊzЌЖ:њpЈЬ *= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:њpЈЬ /= 100
		CUP:ЊzЌЖ:ћйі┤ *= 100
		CUP:ЊzЌЖ:ћйі┤ /= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:ЋsЅш *= 100
		CUP:ЊzЌЖ:ЋsЅш /= RELATION:ЊzЌЖ:(NO:јтљl)
		CUP:ЊzЌЖ:Ќ}ЪT *= 100
		CUP:ЊzЌЖ:Ќ}ЪT /= RELATION:ЊzЌЖ:(NO:јтљl)
	ENDIF
	;-------------------------------------------------
	;ІCЌ═ѓOѓ╔ѓТѓжЈсЅ║ѓ╠ЈѕЌЮ
	;-------------------------------------------------
	IF BASE:ЊzЌЖ:1 <= 0
		;UP:0,1,2ѓ═љРњИѓ╔ЌЇѓяѓ╠ѓ┼љТѓ╔ЈѕЌЮѓхѓ─ѓаѓж
		CUP:ЊzЌЖ:Ќ~ЈЬ /= 2
		CUP:ЊzЌЖ:І▒ЈЄ /= 2
		CUP:ЊzЌЖ:ІЧЋъ /= 2
		CUP:ЊzЌЖ:ЈKЊЙ /= 2
		CUP:ЊzЌЖ:њpЈЬ /= 2
		CUP:ЊzЌЖ:І░Ћ| /= 2
		CUP:ЊzЌЖ:ІЖњ╔ /= 2
		DOWNBASE:ЊzЌЖ:Љ╠Ќ═ *= 2
		DOWNBASE:ЊzЌЖ:Љ╠Ќ═ += 80
	ENDIF
	;-------------------------------------------------
	;ІЖњ╔ѓЕѓуѓГѓжЉ╠Ќ═ЂEІCЌ═ѓ╠їИЈГ
	;-------------------------------------------------
	LOCAL = CUP:ЊzЌЖ:ІЖњ╔ / 20
	;ABL:Ѓ}Ѓ]ѓ┴ІCѓ­ѓПѓж
	SELECTCASE ABL:ЊzЌЖ:Ѓ}Ѓ]ѓ┴ІC
		CASE 0
			TIMES LOCAL , 1.00
		CASE 1
			TIMES LOCAL , 0.95
		CASE 2
			TIMES LOCAL , 0.90
		CASE 3
			TIMES LOCAL , 0.80
		CASE 4
			TIMES LOCAL , 0.65
		CASEELSE
			TIMES LOCAL , 0.50
	ENDSELECT
	;њ╔іo
	LOCAL = LOCAL * (10 + TALENT:ЊzЌЖ:њ╔іo * 2) / 10
	DOWNBASE:ЊzЌЖ:Љ╠Ќ═ += LOCAL
	DOWNBASE:ЊzЌЖ:ІCЌ═ += LOCAL

;-------------------------------------------------------------------------------
;FIXME:іољћѓ╠љЯќЙѓ­ЈЉѓбѓ─ѓГѓЙѓ│ѓб
;@return 1:xxx,0:xxx
@SOURCE_DOWNBASE(ЊzЌЖ,јтљl=0)
	#DIM ЊzЌЖ
	#DIM јтљl
	BASE:ЊzЌЖ:Љ╠Ќ═ = MAX(0,BASE:ЊzЌЖ:Љ╠Ќ═ - DOWNBASE:ЊzЌЖ:Љ╠Ќ═)
	BASE:ЊzЌЖ:ІCЌ═ = MAX(0,BASE:ЊzЌЖ:ІCЌ═ - DOWNBASE:ЊzЌЖ:ІCЌ═)
