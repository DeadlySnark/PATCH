@EVENT_COUNTER_REACTION(ARG,ARG:1)

;膣挿入
IF MASTER_POSE(6,1) == ARG && !COM417_is_Protected_CheckOnly(MASTER,ARG,娼婦紋_太股)
	LOCAL = RAND:5
	SELECTCASE LOCAL
		CASE 1
			SIF ABL:ARG:膣 < 2
				RETURN 0
			TCVAR:ARG:21 = 1
		;だいしゅきホールド
		CASE 2
			SIF !TALENT:ARG:恋慕
				RETURN 0
			SIF TEQUIP:ARG:体位 == 1 || TEQUIP:ARG:体位 == 4
				TCVAR:ARG:21 = 2
		;性交見せつけ
		CASE 3
			SIF ABL:ARG:露出癖 < 2
				RETURN 0
			SIF TEQUIP:ARG:体位 == 3
				TCVAR:ARG:21 = 3
	ENDSELECT
	SIF TCVAR:ARG:21
		TCVAR:ARG:20 = 500
ENDIF

;手淫
IF MASTER_POSE(3,1) == ARG
	LOCAL = RAND:4
	SELECTCASE LOCAL
		CASE 1
			SIF ABL:ARG:指 < 2
				RETURN 0
			TCVAR:ARG:20 = 502
		;玉揉み
		CASE 2
			SIF ABL:ARG:指 < 2
				RETURN 0
			IF ARG == TARGET && SELECTCOM == 80
				TCVAR:ARG:21 = 1
				TCVAR:ARG:20 = 600
			ENDIF
		;アナル愛撫
		CASE 3
			SIF BASE:PLAYER:勃起 < 1000
				RETURN 0
			SIF ARG == TARGET && SELECTCOM == 80
				TCVAR:ARG:20 = 601
	ENDSELECT
ENDIF
;フェラチオ
IF MASTER_POSE(4,1) == ARG && !COM417_is_Protected_CheckOnly(MASTER,ARG,娼婦紋_右頬)
	LOCAL = RAND:4
	SELECTCASE LOCAL
		CASE 1
			SIF ABL:ARG:舌 < 2
				RETURN 0
			TCVAR:ARG:20 = 503
			TCVAR:ARG:21 = 1
		;玉舐め
		CASE 2
			SIF ABL:ARG:舌 < 2
				RETURN 0
			SIF ARG == TARGET
				RETURN 0
			TCVAR:ARG:21 = 2
			TCVAR:ARG:20 = 600
		;ディープスロート
		CASE 3
			SIF ABL:ARG:舌 < 4
				RETURN 0
			SIF BASE:PLAYER:勃起 < 1000
				RETURN 0
			IF ARG == TARGET && SELECTCOM == 81
				TCVAR:ARG:20 = 503
				TCVAR:ARG:21 = 3
			ENDIF
	ENDSELECT
ENDIF
;パイズリ
IF MASTER_POSE(5,1) == ARG && !COM417_is_Protected_CheckOnly(MASTER,ARG,娼婦紋_胸元)
	LOCAL = RAND:4
	SELECTCASE LOCAL
		CASE 1
			SIF ARG == TARGET || SELECTCOM == 82
				RETURN 0
			SIF ABL:ARG:胸 < 2
				RETURN 0
			TCVAR:ARG:21 = 1
		;縦パイズリ
		CASE 2
			SIF ABL:ARG:胸 < 3
				RETURN 0
			SIF TALENT:ARG:バストサイズ < 1
				RETURN 0
			SIF ARG == TARGET && SELECTCOM == 82
				TCVAR:ARG:21 = 2
		;頑張って谷間をつくる
		CASE 3
			SIF ABL:ARG:胸 < 3
				RETURN 0
			SIF TALENT:ARG:バストサイズ != -1
				RETURN 0
			SIF ARG == TARGET && SELECTCOM == 82
				TCVAR:ARG:21 = 3
	ENDSELECT
	SIF TCVAR:ARG:21
		TCVAR:ARG:20 = 504
ENDIF
;素股
IF MASTER_POSE(2,1) == ARG && !COM417_is_Protected_CheckOnly(MASTER,ARG,娼婦紋_恥丘)
	LOCAL = RAND:3
	SELECTCASE LOCAL
		CASE 1
			SIF ABL:ARG:腰 < 2
				RETURN 0
			TCVAR:ARG:21 = 1
		;手淫追加
		CASE 2
			SIF ABL:ARG:腰 < 2
				RETURN 0
			SIF ABL:ARG:指 < 2
				RETURN 0
			SIF ARG == TARGET && SELECTCOM == 83
				TCVAR:ARG:21 = 2
	ENDSELECT
	SIF TCVAR:ARG:21
		TCVAR:ARG:20 = 505
ENDIF
